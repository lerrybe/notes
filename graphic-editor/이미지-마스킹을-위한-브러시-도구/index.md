# ì´ë¯¸ì§€ ë§ˆìŠ¤í‚¹ì„ ìœ„í•œ ë¸ŒëŸ¬ì‹œ ë„êµ¬ ì˜ˆì œ

## ğŸ’¡ ë°°ê²½

- ì´ë¯¸ì§€ ì²˜ë¦¬ ë° í¸ì§‘ ì‘ì—…ì—ì„œ íŠ¹ì • ì˜ì—­ì„ ì„ íƒí•˜ê³  ë¶„ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.
- ì´ëŸ¬í•œ ë¸ŒëŸ¬ì‹œ ë„êµ¬ëŠ” (Case Study)
  - ì´ë¯¸ì§€ ì„¸ê·¸ë©˜í…Œì´ì…˜ í•™ìŠµ ë°ì´í„° ìƒì„±
  - ì´ë¯¸ì§€ í•©ì„±ì„ ìœ„í•œ ê°ì²´ ë¶„ë¦¬
  - ì˜ë£Œ ì˜ìƒ ë¶„ì„ì˜ ê´€ì‹¬ ì˜ì—­(ROI) ì§€ì •
  - UI/UX ë””ìì¸ì˜ íŠ¹ì • ìš”ì†Œ í•˜ì´ë¼ì´íŠ¸
- ìœ„ì™€ ê°™ì€ ìƒí™©ì—ì„œ í™œìš©ë©ë‹ˆë‹¤.

## ğŸ’¡ êµ¬í˜„ì›ë¦¬

- HTML5 Canvas APIë¡œ ì›¹ í™˜ê²½ì—ì„œ êµ¬í˜„í•©ë‹ˆë‹¤.

### 1. ì´ì¤‘ ìº”ë²„ìŠ¤ ë ˆì´ì–´ êµ¬ì¡°

- **sourceCanvas**: ì›ë³¸ ì´ë¯¸ì§€ í‘œì‹œìš© ë² ì´ìŠ¤ ë ˆì´ì–´
- **brushCanvas**: ë¸ŒëŸ¬ì‹œ ìŠ¤íŠ¸ë¡œí¬ ìº¡ì²˜ìš© ìƒìœ„ ë ˆì´ì–´
- ë‘ ìº”ë²„ìŠ¤ì˜ ì •í™•í•œ ì¤‘ì²©ì„ ìœ„í•œ í¬ì§€ì…”ë‹ ì²˜ë¦¬

### 2. Canvas í•´ìƒë„ì™€ CSS Transform ë¶„ë¦¬

- ìº”ë²„ìŠ¤ëŠ” ë‘ ê°€ì§€ í¬ê¸° ì†ì„±ì„ ê°€ì§‘ë‹ˆë‹¤:

  ```jsx
  // ì‹¤ì œ í•´ìƒë„ ì„¤ì • (í”½ì…€ ë°ì´í„° ì €ì¥ ê³µê°„)
  sourceCanvas.width = originalImageWidth;
  sourceCanvas.height = originalImageHeight;

  // CSS í‘œì‹œ í¬ê¸° (ë Œë”ë§ í¬ê¸°)
  sourceCanvas.style.width = "100%";
  sourceCanvas.style.height = "100%";
  ```

- ì´ëŸ¬í•œ ë¶„ë¦¬ì˜ ì¥ì :
  - ì›ë³¸ í•´ìƒë„ ë³´ì¡´ìœ¼ë¡œ ì´ë¯¸ì§€ í’ˆì§ˆ ìœ ì§€
  - ì‹¤ì œ ê³„ì‚°ì€ ì›ë³¸ í•´ìƒë„, ë Œë”ë§ì€ ì¡°ì •ëœ í¬ê¸°ë¡œ ì²˜ë¦¬í•˜ì—¬ ì„±ëŠ¥ ìµœì í™”
  - Retina ë””ìŠ¤í”Œë ˆì´ ë“±ì—ì„œë„ ì„ ëª…í•œ ì¶œë ¥

### 3. ë¸ŒëŸ¬ì‹œ ìŠ¤íŠ¸ë¡œí¬ ì•Œê³ ë¦¬ì¦˜

- ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ ìº¡ì²˜
- ìº”ë²„ìŠ¤ ë‚´ ì‹¤ì œ ì¢Œí‘œ ê³„ì‚°

```jsx
const scaleX = canvas.width / canvas.getBoundingClientRect().width;
const realX = mouseX * scaleX;
```

- ì´ì „ ì¢Œí‘œì™€ í˜„ì¬ ì¢Œí‘œ ì—°ê²°
- íŠ¹íˆ ì¢Œí‘œ ì—°ê²°ì´ ì¤‘ìš”í•œ ì´ìœ :
  - mousemove ì´ë²¤íŠ¸ëŠ” ë¹ ë¥¸ ì´ë™ ì‹œ ëª¨ë“  í”½ì…€ì„ ìº¡ì²˜í•˜ì§€ ëª»í•¨
  - ì´ë²¤íŠ¸ í¬ì¸íŠ¸ ì‚¬ì´ë¥¼ ì§ì„ ìœ¼ë¡œ ë³´ê°„í•˜ì—¬ ë¶€ë“œëŸ¬ìš´ ìŠ¤íŠ¸ë¡œí¬ ìƒì„±
  - ëŠì–´ì§ ì—†ëŠ” ì—°ì†ì ì¸ ì„  ê·¸ë¦¬ê¸° ê°€ëŠ¥

### 4. í”½ì…€ ë°ì´í„° êµ¬ì¡°ì™€ ë§ˆìŠ¤í¬ ìƒì„±

- ImageData ê°ì²´ì˜ data ë°°ì—´ì€ RGBA ê°’ì„ ìˆœì°¨ì ìœ¼ë¡œ ì €ì¥:
  ```jsx
  data[i]; // R (0-255) ë¹¨ê°„ìƒ‰ ì±„ë„
  data[i + 1]; // G (0-255) ë…¹ìƒ‰ ì±„ë„
  data[i + 2]; // B (0-255) íŒŒë€ìƒ‰ ì±„ë„
  data[i + 3]; // A (0-255) ì•ŒíŒŒ ì±„ë„
  ```
- ë§ˆìŠ¤í¬ ìƒì„± í”„ë¡œì„¸ìŠ¤:
  ```jsx
  // ë¸ŒëŸ¬ì‹œ ìŠ¤íŠ¸ë¡œí¬ê°€ ìˆëŠ” ë¶€ë¶„(ì•ŒíŒŒê°’ > 0)ì„ í°ìƒ‰ìœ¼ë¡œ ë³€í™˜
  if (brushData.data[i + 3] > 0) {
    extractData.data[i] = 255; // R = 255 (í°ìƒ‰)
    extractData.data[i + 1] = 255; // G = 255 (í°ìƒ‰)
    extractData.data[i + 2] = 255; // B = 255 (í°ìƒ‰)
    extractData.data[i + 3] = 255; // A = 255 (ì™„ì „ ë¶ˆíˆ¬ëª…)
  }
  // ë¸ŒëŸ¬ì‹œ ìŠ¤íŠ¸ë¡œí¬ê°€ ì—†ëŠ” ë¶€ë¶„ì€ ê¸°ë³¸ê°’ 0 ìœ ì§€ (ê²€ì •ìƒ‰, ì™„ì „ ë¶ˆíˆ¬ëª…)
  ```
- ë§ˆìŠ¤í¬ íŠ¹ì„±:
  - ë¸ŒëŸ¬ì‹œ ì˜ì—­: RGB(255, 255, 255) - í°ìƒ‰
  - ë¹„ë¸ŒëŸ¬ì‹œ ì˜ì—­: RGB(0, 0, 0) - ê²€ì •ìƒ‰
  - ëª¨ë“  í”½ì…€ì˜ ì•ŒíŒŒê°’ì€ 255ë¡œ ì„¤ì • (ì™„ì „ ë¶ˆíˆ¬ëª…)
  - ê²°ê³¼ë¬¼ì€ ì´ì§„ ë§ˆìŠ¤í¬ (í”½ì…€ ê°’ì´ 0(ê²€ì •) ë˜ëŠ” 255(í°ìƒ‰)ë§Œ ì¡´ì¬)ë¡œ, ì´ë¯¸ì§€ ì„¸ê·¸ë©˜í…Œì´ì…˜ì— ë°”ë¡œ í™œìš© ê°€ëŠ¥
    - í›„ì²˜ë¦¬ê°€ ìš©ì´í•˜ê³ , ë°ì´í„° í¬ê¸° ìµœì†Œí™” ê°€ëŠ¥

## ğŸ’¡ ì½”ë“œ êµ¬í˜„

### 1. ìº”ë²„ìŠ¤ í¬ê¸° ì¡°ì •

```jsx
const maxWidth = window.innerWidth * 0.9;
const maxHeight = window.innerHeight * 0.7;
const imageRatio = width / height;

// ì´ë¯¸ì§€ ë¹„ìœ¨ ìœ ì§€í•˜ë©´ì„œ ìµœëŒ€ í¬ê¸° ê³„ì‚°
if (imageRatio > containerRatio) {
  newWidth = maxWidth;
  newHeight = newWidth / imageRatio;
} else {
  newHeight = maxHeight;
  newWidth = newHeight * imageRatio;
}
```

### 2. ë¸ŒëŸ¬ì‹œ ìŠ¤íŠ¸ë¡œí¬ ì²˜ë¦¬

```jsx
// ì‹¤ì œ ìº”ë²„ìŠ¤ í¬ê¸°ì™€ í‘œì‹œ í¬ê¸°ì˜ ë¹„ìœ¨ ê³„ì‚°
const scaleX = brushCanvas.width / rect.width;
const scaleY = brushCanvas.height / rect.height;

// ë§ˆìš°ìŠ¤ ì¢Œí‘œë¥¼ ì‹¤ì œ ìº”ë²„ìŠ¤ ì¢Œí‘œë¡œ ë³€í™˜
const x = (e.clientX - rect.left) * scaleX;
const y = (e.clientY - rect.top) * scaleY;
```

### 3. ë§ˆìŠ¤í¬ ë°ì´í„° ì²˜ë¦¬

```jsx
// ë¸ŒëŸ¬ì‹œ ìº”ë²„ìŠ¤ì˜ í”½ì…€ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
const brushData = brushCtx.getImageData(0, 0, width, height);
// ì¶”ì¶œ ìº”ë²„ìŠ¤ ìƒì„± ë° ì´ˆê¸°í™” (ê²€ì • ë°°ê²½)
const extractData = extractCtx.getImageData(0, 0, width, height);

// ë¸ŒëŸ¬ì‹œ ì˜ì—­ ë§ˆìŠ¤í‚¹
for (let i = 0; i < brushData.data.length; i += 4) {
  if (brushData.data[i + 3] > 0) {
    // ì•ŒíŒŒê°’ ì²´í¬
    // RGBA ëª¨ë‘ 255ë¡œ ì„¤ì • (í°ìƒ‰)
    extractData.data[i] = 255;
    extractData.data[i + 1] = 255;
    extractData.data[i + 2] = 255;
    extractData.data[i + 3] = 255;
  }
}
```

## ğŸ’¡ êµ¬í˜„ ì‹œ ì£¼ì˜ì‚¬í•­

- ë¸Œë¼ìš°ì € ë¦¬ì‚¬ì´ì§• ì‹œ ìº”ë²„ìŠ¤ í¬ê¸°ì™€ ë‚´ìš© ìœ ì§€ë¥¼ ìœ„í•œ ì´ë²¤íŠ¸ ì²˜ë¦¬ í•„ìš”
- í„°ì¹˜ ì´ë²¤íŠ¸ ë¯¸êµ¬í˜„ìœ¼ë¡œ ëª¨ë°”ì¼ í™˜ê²½ ì§€ì›ì´ ì œí•œì  (TBD)
- ë¸ŒëŸ¬ì‹œ í¬ê¸° ë³€ê²½ ì‹œ ì‹¤ì‹œê°„ UI ì—…ë°ì´íŠ¸ êµ¬í˜„ í•„ìš”
- ëŒ€ìš©ëŸ‰ ì´ë¯¸ì§€ ì²˜ë¦¬ ì‹œ ë©”ëª¨ë¦¬ ê´€ë¦¬ì™€ ì„±ëŠ¥ ìµœì í™” ê³ ë ¤ (TBD)
- í”½ì…€ ë°ì´í„° ì¡°ì‘ ì‹œ 4ë°”ì´íŠ¸ ë‹¨ìœ„(RGBA)ë¡œ ì²˜ë¦¬í•´ì•¼ í•¨
- ìº”ë²„ìŠ¤ ì¢Œí‘œ ê³„ì‚° ì‹œ CSS ë³€í™˜ê³¼ ì‹¤ì œ í•´ìƒë„ ì°¨ì´ ê³ ë ¤ í•„ìˆ˜

## ğŸ’¡ Playground (ì—°ìŠµì˜ˆì œ)

- https://codepen.io/lerrybe/pen/gbYwXpG
